function addLoadEvent(a) {
    var b = window.onload;
    window.onload = "function" != typeof window.onload ? a : function() {
        b();
        a()
    }
}

function insertAfter(a, b) {
    var c = b.parentNode;
    c.lastChild == b ? c.appendChild(a) : c.insertBefore(a, b.nextSibling)
}

function addClass(a, b) { a.className ? (newClassName = a.className, newClassName += " ", newClassName += b, a.className = newClassName) : a.className = b }

function highlightPage() {
    if (!document.getElementsByTagName || !document.getElementById) return !1;
    var a = document.getElementsByTagName("header");
    if (0 == a.length) return !1;
    a = a[0].getElementsByTagName("nav");
    if (0 == a.length) return !1;
    a = a[0].getElementsByTagName("a");
    for (var b, c = 0; c < a.length; c++) b = a[c].getAttribute("href"), -1 != window.location.href.indexOf(b) && (a[c].className = "here", b = a[c].lastChild.nodeValue.toLowerCase(), document.body.setAttribute("id", b))
}
addLoadEvent(highlightPage);

function moveElement(a, b, c, d) {
    if (!document.getElementById || !document.getElementById(a)) return !1;
    var f = document.getElementById(a);
    f.movement && clearTimeout(f.movement);
    f.style.left || (f.style.left = "0px");
    f.style.top || (f.style.top = "0px");
    var e = parseInt(f.style.left),
        g = parseInt(f.style.top);
    if (e == b && g == c) return !0;
    if (e < b) {
        var h = Math.ceil((b - e) / 10);
        e += h
    }
    e > b && (h = Math.ceil((e - b) / 10), e -= h);
    g < c && (h = Math.ceil((c - g) / 10), g += h);
    g > c && (h = Math.ceil((g - c) / 10), g -= h);
    f.style.left = e + "px";
    f.style.top = g + "px";
    f.movement =
        setTimeout(function() { moveElement(a, b, c, d) }, d)
}

function prepareSlideShow() {
    if (!document.getElementById || !document.getElementsByTagName || !document.getElementById("intro")) return !1;
    var a = document.getElementById("intro"),
        b = document.createElement("div");
    b.setAttribute("id", "slideshow");
    var c = document.createElement("img");
    c.setAttribute("src", "images/frame.gif");
    c.setAttribute("alt", "");
    c.setAttribute("id", "frame");
    b.appendChild(c);
    c = document.createElement("img");
    c.setAttribute("src", "images/slideshow.gif");
    c.setAttribute("alt", "a glimpse of what awaits you");
    c.setAttribute("id", "preview");
    b.appendChild(c);
    insertAfter(b, a);
    a = a.getElementsByTagName("a");
    var d;
    for (b = 0; b < a.length; b++) a[b].onmouseover = function() {
        d = this.getAttribute("href"); - 1 != d.indexOf("index.html") && moveElement("preview", 0, 0, 5); - 1 != d.indexOf("about.html") && moveElement("preview", -150, 0, 10); - 1 != d.indexOf("photos.html") && moveElement("preview", -300, 0, 10); - 1 != d.indexOf("live.html") && moveElement("preview", -450, 0, 10); - 1 != d.indexOf("contact.html") && (console.log("it is ok!!!"), moveElement("preview", -600, 0, 10))
    }
}
addLoadEvent(prepareSlideShow);

function showSection(a) { for (var b = document.getElementsByTagName("section"), c = 0; c < b.length; c++) b[c].getAttribute("id") != a ? b[c].style.display = "none" : b[c].style.display = "block" }

function prepareInternalnav() {
    if (!document.getElementsByTagName || !document.getElementById) return !1;
    var a = document.getElementsByTagName("article");
    if (0 === a.length) return !1;
    a = a[0].getElementsByTagName("nav");
    if (0 == a.length) return 0;
    a = a[0].getElementsByTagName("a");
    for (var b = 0; b < a.length; b++) {
        var c = a[b].getAttribute("href").split("#")[1];
        document.getElementById(c) && (document.getElementById(c).style.display = "none", a[b].destination = c, a[b].onclick = function() { showSection(this.destination); return !1 })
    }
}
addLoadEvent(prepareInternalnav);

function showPic(a) {
    if (!document.getElementById || !document.getElementById("placeholder")) return !0;
    var b = a.getAttribute("href");
    document.getElementById("placeholder").setAttribute("src", b);
    if (!document.getElementById("description")) return !0;
    a.getAttribute("title") && a.getAttribute("title");
    a = document.getElementById("description");
    3 == a.firstChild.nodeType && (a.firstChild.nodeValue = a);
    return !1
}

function preparePlaceholder() {
    if (!(document.createElement && document.createTextNode && document.getElementById && document.getElementsByTagName && document.getElementById("imagegallery"))) return !1;
    var a = document.getElementById("imagegallery"),
        b = document.createElement("img");
    b.setAttribute("id", "placeholder");
    b.setAttribute("src", "images/placeholder.gif");
    b.setAttribute("alt", "my image gallery");
    var c = document.createElement("p");
    c.setAttribute("id", "description");
    var d = document.createTextNode("Choose an image");
    c.appendChild(d);
    insertAfter(c, a);
    insertAfter(b, c)
}

function prepareGallery() {
    if (!document.getElementById || !document.getElementsByTagName || !document.getElementById("imagegallery")) return !1;
    for (var a = document.getElementById("imagegallery").getElementsByTagName("a"), b = 0; b < a.length; b++) a[b].onclick = function() {
        var c = showPic(this);
        console.log(c);
        return c
    }
}
addLoadEvent(preparePlaceholder);
addLoadEvent(prepareGallery);

function stripeTables() {
    if (!document.getElementsByTagName) return !1;
    for (var a = document.getElementsByTagName("table"), b = 0; b < a.length; b++)
        for (var c = !1, d = a[b].getElementsByTagName("tr"), f = 0; f < d.length; f++) 1 == c ? (addClass(d[f], "odd"), c = !1) : c = !0
}

function highlightRows() { if (!document.getElementsByTagName) return !1; for (var a = document.getElementsByTagName("tr"), b = 0; b < a.length; b++) a[b].oldClassName = a[b].className, a[b].onmouseover = function() { addClass(this, "highlight") }, a[b].onmouseout = function() { this.className = this.oldClassName } }

function displayAbbreviations() {
    if (!document.getElementsByTagName || !document.createElement || !document.createTextNode) return !1;
    var a = document.getElementsByTagName("abbr");
    if (0 == a.length) return !1;
    for (var b = {}, c = 0; c < a.length; c++) {
        var d = a[c];
        if (!(1 > d.childNodes.length)) {
            var f = d.getAttribute("title"),
                e = d.lastChild.nodeValue;
            b[e] = f
        }
    }
    a = document.createElement("dl");
    for (e in b) c = document.createElement("dt"), d = document.createTextNode(e), c.appendChild(d), d = document.createElement("dd"), f = document.createTextNode(b[e]),
        d.appendChild(f), a.appendChild(c), a.appendChild(d);
    if (1 > a.childNodes.length) return !1;
    b = document.createElement("h3");
    e = document.createTextNode("Abbreviations");
    b.appendChild(e);
    e = document.getElementsByTagName("article");
    if (0 == e.length) return !1;
    e[0].appendChild(b);
    e[0].appendChild(a)
}
addLoadEvent(stripeTables);
addLoadEvent(highlightRows);
addLoadEvent(displayAbbreviations);

function resetFields(a) {
    for (var b = 0; b < a.elements.length; b++) {
        var c = a.elements[b];
        "submit" != c.type && (c.placeholder || c.getAttribute("placeholder")) && (c.onfocus = function() {
            var d = this.placeholder || this.getAttribute("placeholder");
            this.value == d && (this.value = this.className = "")
        }, c.onblur = function() { "" == this.value && (this.className = "placeholder", this.value = this.placeholder || this.getAttribute("placeholder")) }, c.onblur())
    }
}

function isFilled(a) { if (0 == a.value.replace(" ", "").length) return !1; var b = a.placeholder || a.getAttribute("placeholder"); return a.value != b }

function isEmail(a) { return -1 != a.value.indexOf("@") && -1 != a.value.indexOf(".") }

function validateForm(a) {
    for (a = 0; a < whichform.elements.length; a++) {
        var b = whichform.elements[a];
        console.log(b.name);
        if ("required" == b.required) { isFilled(b.value) || alert("Please fill in the " + b.name + " field."); break }
        if ("email" == b.type && !isEmail(b)) { alert("The " + b.name + " field must be a valid email address."); break }
    }
    return !1
}

function prepareForms() {
    for (var a = 0; a < document.forms.length; a++) {
        var b = document.forms[a];
        resetFields(b);
        b.onsubmit = function() { if (!validateForm(this)) return !1; var c = document.getElementsByTagName("article"); return submitFormWithAjax(this, c) ? !1 : !0 }
    }
}
addLoadEvent(prepareForms);

function getHTTPObject(a) { return new XMLHttpRequest }

function dispalyAjaxloading(a) {
    for (; a.hasChildNodes();) a.removeChild(a.lastChild);
    var b = document.createElement("img");
    b.setAttribute("src", "images/loading.gif");
    b.setAttribute("alt", "Loading...");
    a.appendChild(b)
}

function submitFormWithAjax(a, b) {
    var c = getHttpObject();
    if (!c) return console.log("Ajax load failed!"), !1;
    displayAjaxLoading(b);
    for (var d = [], f, e = 0; e < a.elements.length; e++) f = a.elements[e], d[e] = f.name + "=" + encodeURIComponent(f.value);
    d = d.join("&");
    c.open("POST", a.getAttribute("action"), !0);
    c.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    c.onreadystatechange = function() {
        if (4 == c.readyState)
            if (200 == c.status || 0 == c.status) {
                var g = c.responseText.match(/<article>([\s\S+])<\/article>/);
                b.innerHTML =
                    0 < g.length ? g[1] : "<p>Oops, there was an error. Sorry. </p>"
            } else b.innerHTML = "<p>" + c.statusText + "</p>"
    };
    c.send(d);
    return !0
};